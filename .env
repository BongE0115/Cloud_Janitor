# =============================================================================
# Cloud Janitor Environment Configuration
# 새로운 아키텍처:
# - TC (오래된 시스템): Target Cluster - Prometheus만 존재
# - cj (새로운 시스템): Cloud Janitor - MySQL 있음
# - cj가 TC의 Prometheus API를 폴링하여 좀비 Pod 감지
# =============================================================================

# --- [좀비 파드 판정 수치 기준] ---
LIMIT_CPU_M=10.0           # 평균 CPU 사용량이 10m(0.01코어) 미만이면 좀비
TIME_WINDOW_CPU=2m         # CPU 사용량을 측정할 시간 범위 (2분)

LIMIT_NET_B=100.0          # 평균 네트워크 수신량이 100바이트 미만이면 좀비
TIME_WINDOW_NET=2m         # 네트워크 사용량을 측정할 시간 범위 (2분)

LIMIT_MEM_MI=1.0           # 메모리 사용량 기준 (현재는 로그 출력용)

# --- [비용 및 실행 제어] ---
COST_PER_CORE_HOUR=0.1     # 시간당 1코어당 발생하는 비용 ($)
DEFAULT_CPU_REQ=0.2        # 파드 삭제 시 비용 계산을 위한 기본 CPU 할당량
DRY_RUN=True               # False: 실전 삭제, True: 테스트용(목록만 확인)

# --- [Target Cluster 접속 정보] ---
# Target Cluster(TC)는 외부 서버에서 실행되며 Prometheus만 존재
TARGET_HOST=localhost                  # Target 서버 주소 (외부 서버일 경우 IP 또는 도메인 입력)
TARGET_SSH_USER=root                # Target 서버 SSH 사용자 (SSH 접근용)
TARGET_SSH_PORT=22                # Target 서버 SSH 포트 (기본값: 22)
TARGET_SSH_KEY=~/.ssh/id_rsa     # Target 서버 SSH 키 경로

# SSH 터널 설정 (Management Cluster에서 Target Prometheus 접근)
# true: SSH 터널을 자동 설정 (localhost:9091 → TARGET_HOST:9091)
# false: 이미 SSH 터널이 설정되었다고 가정
USE_SSH_TUNNEL=true

# Target Prometheus 접속 정보
# cj(Cloud Janitor)가 TC의 Prometheus API를 폴링
# SSH 터널이 있는 경우 localhost:9091, 없는 경우 TARGET_HOST:9091
TARGET_PROMETHEUS_URL=http://localhost:9091

# --- [cj MySQL 데이터베이스 접속 정보] ---
# cj(Cloud Janitor)에서 직접 관리하는 MySQL
# 좀비 Pod 삭제 기록 저장
DB_HOST=mysql.mysql.svc.cluster.local
DB_USER=root
DB_PASSWORD=rootpassword
DB_NAME=janitor_db

# --- [Grafana 관리자 비밀번호] ---
# cj(Cloud Janitor)에서 배포되는 Grafana
GRAFANA_PASSWORD=changeme
